---
title: 'Composite type filters'
metaTitle: 'Composite type filters'
toc: true
tocDepth: 5
---

## Composite type filters

<Admonition type="warning">

Available for MongoDB only in Prisma `3.11.0` and later.

</Admonition>

Composite type filters allow you to filter the contents of [composite types](/concepts/components/prisma-client/composite-types).

### Reference

```ts file=index.d.ts
export type AddressCompositeFilter = {
  equals?: AddressObjectEqualityInput
  is?: AddressWhereInput
  isNot?: AddressWhereInput
}
```

```ts file=index.d.ts
export type PhotoCompositeListFilter = {
  equals?: Enumerable<PhotoObjectEqualityInput>
  every?: PhotoWhereInput
  some?: PhotoWhereInput
  none?: PhotoWhereInput
  isEmpty?: boolean
}
```

### <inlinecode>equals</inlinecode>

Use `equals` to filter results by matching a composite type or a list of composite types. Requires all required fields of the composite type to match.

#### Remarks

When matching optional fields, you need to distinguish between undefined (missing) fields of the document, and fields that have been explicitly set to `null`:

- If you omit an optional field, it will match undefined fields, but not fields that have been set to `null`
- If you filter for `null` values of an optional field with `equals: { ... exampleField: null ... }`, then it will match only documents where the field has been set to `null`, and not undefined fields

The ordering of fields and lists matters when using `equals`:

- For fields, `{ "a": "1", "b": "2" }` and `{ "b": "2", "a": "1" }` are not considered equal
- For lists, `[ { "a": 1 }, { "a": 2 } ]` and `[ { "a": 2 }, { "a": 1 } ]` are not considered equal

#### Examples

##### Find orders that exactly match the given <inlinecode>shippingAddress</inlinecode>

```ts
const orders = await prisma.order.findMany({
  where: {
    shippingAddress: {
      equals: {
        street: '555 Candy Cane Lane',
        city: 'Wonderland',
        zip: '52337',
      },
    },
  },
})
```

##### Find products with photos that match all of a list of <inlinecode>url</inlinecode>s

```ts
const product = prisma.product.findMany({
  where: {
    equals: {
      photos: [{ url: '1.jpg' }, { url: '2.jpg' }],
    },
  },
})
```

### <inlinecode>is</inlinecode>

Use `is` to filter results by matching specific fields within composite types.

#### Examples

##### Find orders with a <inlinecode>shippingAddress</inlinecode> that matches the given street name

```ts
const orders = await prisma.order.findMany({
  where: {
    shippingAddress: {
      is: {
        street: '555 Candy Cane Lane',
      },
    },
  },
})
```

### <inlinecode>isNot</inlinecode>

Use `isNot` to filter results for composite type fields that do not match.

#### Examples

##### Find orders with a <inlinecode>shippingAddress</inlinecode> that does not match the given zip code

```ts
const orders = await prisma.order.findMany({
  where: {
    shippingAddress: {
      isNot: {
        zip: '52337',
      },
    },
  },
})
```

### <inlinecode>isEmpty</inlinecode>

Use `isEmpty` to filter results for an empty list of composite types.

#### Examples

##### Find products with no photos

```ts
const product = prisma.product.findMany({
  where: {
    photos: {
      isEmpty: true,
    },
  },
})
```

### <inlinecode>every</inlinecode>

Use `every` to filter for lists of composite types where every item in the list matches the condition

#### Examples

##### Find the first product where every photo has a <inlinecode>height</inlinecode> of <inlinecode>200</inlinecode>

```ts
const product = prisma.product.findFirst({
  where: {
    photos: {
      every: {
        { height: 200 },
      }
    }
  },
})
```

### <inlinecode>some</inlinecode>

Use `some` to filter for lists of composite types where one or more items in the list match the condition.

#### Examples

##### Find the first product where one or more photos have a <inlinecode>url</inlinecode> of <inlinecode>2.jpg</inlinecode>

```ts
const product = prisma.product.findFirst({
  where: {
    photos: {
      some: {
        { url: "2.jpg" },
      }
    }
  },
})
```

### <inlinecode>none</inlinecode>

Use `none` to filter for lists of composite types where no items in the list match the condition.

#### Examples

##### Find the first product where no photos have a <inlinecode>url</inlinecode> of <inlinecode>2.jpg</inlinecode>

```ts
const product = prisma.product.findFirst({
  where: {
    photos: {
      none: {
        { url: "2.jpg" },
      }
    }
  },
})

```

